<!DOCTYPE html>
<html>

<head>
    <!-- Importing all necessary files -->
    <link rel="stylesheet" href="css/Main_Page.css" />
    <link rel="stylesheet" href="css/Top.css" />
    <link rel="stylesheet" href="css/checkout.css" />

    <!-- include all the js files -->

    <script type="text/javascript" src="js/database.js"></script>
    <script type="text/javascript" src="js/Coupons.js"></script>
    <script type="text/javascript" src="js/User.js"></script>

    <!-- Include the top portion of the page. NOTE: Should be last AND requires Jquery -->
    <script type="text/javascript" src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <link href="https://raw.githubusercontent.com/Eddcapone/custom_jquery-ui-1.12.1/master/jquery-ui.css"
        rel="stylesheet" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://raw.githubusercontent.com/Eddcapone/custom_jquery-ui-1.12.1/master/jquery-ui.js"></script>
    <script type="text/javascript" src="js/Top.js"></script>
    <script type="text/javascript" src="js/modelBox.js"></script>
    <script type="text/javascript" src="js/Checkout.js"></script>

    <meta charset="utf-8" />
    <title>TO GO Online Delivery</title>
</head>

<body>
    <!-- Divider, This is the first (top) portion of the main page-->
    <div id="top">
        <div id="included">
            <!-- Divider, This is the first (top) portion of the main page-->
            <div id="top">
                <a href="Main_Page.html"><img src="images/logo-welcome-page.png" alt="Logo" class="logo"></a>

                <!-- Address at top of screen -->
                <span class="topAddress">
                    <span id="failedFeedback">Please enter an address.</span>
                    <span id="changeFeedback">Address Updated!</span>
                    <input type="text" id="deliveryAddress" onkeydown="addressKeyPress(this); displayAddressOnCheckout();" />
                    <button class="loc-btn" type="button" onclick="addressSubmitCheck(); displayAddressOnCheckout();"> Confirm </button>
                    <img src="images/locationIcon.png" />
                </span>
            </div>
            <script>
                displayAddress();
            </script>
        </div>
    </div>

    <!-- <div class="fab"><div id="test" button onclick="goCheckout();">Place Order</div></div> -->
    <div id ="myBox" class= "box">
      <div class= "confirmation">
        <h2>Order sucessful</h2>
        <a href="index.html"><button onclick="closeBox()">Done</button></a>
      </div>
      
    </div>

    <script>
        function goCheckout() {
            var obj = document.getElementById("empty-message");

            // We have an order
            if (obj == null) {
                // Redirect the user to checkout page
                openBox();
            }
            else {
                // No order, display error message
                checkOutFeedbackAnimation();
            }
        }

    function checkOutFeedbackAnimation() {
        $("#cannotCheckout").fadeIn("slow", function () {
            document.getElementById("cannotCheckout").style.opacity = "3.0"; // Slower fadeout
            $("#cannotCheckout").fadeOut(8000, function () {
                // Do nothing once complete
            });
        });
    }

    </script>

    <!-- <span id="cannotCheckout">Cannot checkout. <br> No items in cart.</span> -->
    <hr class="dividers" />
    <!-- the body of checkout page-->
    <p class="page-title">Checkout</p>
    <div class="card">
        <div class="fab"><div id="test" button onclick="goCheckout();">Place Order</div></div>
        <div class="thumbnail"><img class="left" src="images/checkout.jpg" /></div>
        <div class="right">
            <h1>ORDER DETAILS</h1>
            <!-- <div class="separator"></div> -->
            <p> Delivery ASAP: 30 minutes - 45 minutes</p>
            <p id="addressDisplayed"> Delivering To: 123 fake Street.</p>
            <div class="separator"></div>
            <div id="allOrders">
                <span id="empty-message">No items in your cart. Make an order!</span>
            </div>
            <div id="totalsSection">
                <span id="subtotal"><span class="text">Subtotal ________________________________</span><span
                        class="price" id="subTextPrice">$0.00</span></span>
                <hr class="cartDividor" />
                <span id="GST"><span class="text">GST ____________________________________________</span> <span
                        class="price">$0.00</span></span><br />
                <span id="PST"><span class="text">PST ____________________________________________</span> <span
                        class="price">$0.00</span></span><br />
                <hr class="cartDividor" />
                <span id="Total"><span class="text">Total __________________________________</span> <span
                        class="price"></span><span id="totalAfterCoupon"></span></span>
                <div id="CouponTitle">Applying Coupon: <span id="Coupon">None</span></div>
                <!-- <hr class="cartDividor" /> -->
            </div>
            <!-- <div id="CouponTitle">Applying Coupon: <span id="Coupon">None</span></div> -->
            <div id="tipSection">
                <div id="tipTitle">! Important !</div>
                <div id="tipText">In order for your coupon to work..</div>
            </div>
            <span id="cannotCheckout">Cannot checkout. <br> No items in cart.</span>
            <h6>Expect the Best</h6>
        </div><!-- .card -->
        <script>
        function openBox() {
          document.getElementById("myBox").style.display = "block";
        }

        // Close the Modal
        function closeBox() {
          document.getElementById("myBox").style.display = "none";
            }

            displayAddressOnCheckout();
        </script>

</body>

</html>
